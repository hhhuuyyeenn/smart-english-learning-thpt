<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart English Learning Platform - THPT</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and Babel CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide React Icons CDN -->
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
        
        .prose {
            max-width: none;
        }
        
        .prose p {
            margin-bottom: 1em;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { 
            BookOpen, Brain, FileText, Languages, Target, TrendingUp, 
            Clock, CheckCircle, AlertCircle, Star, Upload, Save, 
            Search, X, Plus, Book, Users, Play, Pause, RotateCcw, 
            Download, RefreshCw 
        } = lucide;

        // Enhanced sample data
        const vocabularyCollections = [
            { id: 1, name: "Academic Words", words: ['analyze', 'evaluate', 'contribute'] },
            { id: 2, name: "Daily News", words: ['accomplish', 'demonstrate'] },
            { id: 3, name: "THPT Preparation", words: ['significant', 'essential'] },
            { id: 4, name: "Uploaded Vocabulary", words: [] }
        ];

        const sampleExamData = {
            questions: [
                {
                    id: 1,
                    type: "single",
                    question: "Choose the correct tense: 'By next year, I _____ my studies.'",
                    options: ["A. will complete", "B. will have completed", "C. complete", "D. completed"],
                    correct: 1,
                    knowledge: "Future Perfect Tense",
                    difficulty: "Vận dụng",
                    explanation: "Future Perfect được dùng để diễn tả hành động hoàn thành trước một thời điểm trong tương lai."
                },
                {
                    id: 2,
                    type: "reading_cluster",
                    passage: "Climate change represents one of the most significant challenges facing humanity today. The increasing concentration of greenhouse gases in the atmosphere has led to a gradual warming of the planet, resulting in unprecedented changes to weather patterns, sea levels, and ecosystems worldwide.",
                    questions: [
                        {
                            id: "2a",
                            question: "What is the main cause of climate change according to the passage?",
                            options: ["A. Natural disasters", "B. Human activities", "C. Ocean currents", "D. Solar radiation"],
                            correct: 1,
                            knowledge: "Reading Comprehension - Main Idea",
                            difficulty: "Thông hiểu"
                        },
                        {
                            id: "2b", 
                            question: "The word 'unprecedented' is closest in meaning to:",
                            options: ["A. Expected", "B. Minor", "C. Never seen before", "D. Temporary"],
                            correct: 2,
                            knowledge: "Vocabulary in Context",
                            difficulty: "Nhận biết"
                        }
                    ]
                }
            ]
        };

        const SmartEnglishLearning = () => {
            // States
            const [activeTab, setActiveTab] = useState('dashboard');
            const [currentFlashcard, setCurrentFlashcard] = useState(0);
            const [showAnswer, setShowAnswer] = useState(false);
            const [selectedCollection, setSelectedCollection] = useState(1);
            const [flashcardMode, setFlashcardMode] = useState('collection');
            const [uploadedVocab, setUploadedVocab] = useState([]);
            const [cardDifficulty, setCardDifficulty] = useState({});
            const [showDictionary, setShowDictionary] = useState(false);
            const [dictionaryWord, setDictionaryWord] = useState('');
            const [dictionaryPosition, setDictionaryPosition] = useState({ x: 0, y: 0 });
            const [examMode, setExamMode] = useState(false);
            const [currentExamQuestion, setCurrentExamQuestion] = useState(0);
            const [examAnswers, setExamAnswers] = useState({});
            const [examTime, setExamTime] = useState(3600);
            const [examResults, setExamResults] = useState(null);
            const [showResults, setShowResults] = useState(false);
            const [timerRunning, setTimerRunning] = useState(false);
            const [savedWords, setSavedWords] = useState([]);
            const [vietnameseNews, setVietnameseNews] = useState('');
            const [translatedNews, setTranslatedNews] = useState(null);
            const [uploadedExams, setUploadedExams] = useState([]);
            const [selectedExam, setSelectedExam] = useState(null);
            
            const csvInputRef = useRef(null);
            const pdfInputRef = useRef(null);

            const tabs = [
                { id: 'dashboard', label: 'Tổng Quan', icon: TrendingUp },
                { id: 'flashcards', label: 'Flashcards', icon: Brain },
                { id: 'news', label: 'Đọc Báo', icon: Languages },
                { id: 'vocabulary', label: 'Sổ Từ Vựng', icon: Book },
                { id: 'practice', label: 'Luyện Thi', icon: Target }
            ];

            // Timer effect
            useEffect(() => {
                let interval;
                if (timerRunning && examTime > 0) {
                    interval = setInterval(() => {
                        setExamTime(time => {
                            if (time <= 1) {
                                setTimerRunning(false);
                                finishExam();
                                return 0;
                            }
                            return time - 1;
                        });
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [timerRunning, examTime]);

            // Dictionary popup
            useEffect(() => {
                const handleDoubleClick = (e) => {
                    const selection = window.getSelection();
                    const selectedText = selection.toString().trim();
                    
                    if (selectedText && /^[a-zA-Z]+$/.test(selectedText)) {
                        const range = selection.getRangeAt(0);
                        const rect = range.getBoundingClientRect();
                        
                        setDictionaryWord(selectedText.toLowerCase());
                        setDictionaryPosition({
                            x: rect.left,
                            y: rect.bottom + window.scrollY
                        });
                        setShowDictionary(true);
                    }
                };

                document.addEventListener('dblclick', handleDoubleClick);
                return () => document.removeEventListener('dblclick', handleDoubleClick);
            }, []);

            // Cambridge-style Dictionary API simulation
            const fetchCambridgeDictionaryData = async (word) => {
                try {
                    const mockCambridgeResponse = {
                        'analyze': {
                            word: 'analyze',
                            phonetic: '/ˈæn.ə.laɪz/',
                            partOfSpeech: 'verb',
                            definition: 'to study or examine something in detail, in order to discover more about it',
                            level: 'B2',
                            examples: [
                                'The data was analyzed using statistical methods.',
                                'We need to analyze the results of the survey.',
                                'Scientists analyze samples in the laboratory.'
                            ],
                            collocations: [
                                'analyze data', 'analyze information', 'analyze results',
                                'analyze samples', 'carefully analyze', 'systematically analyze'
                            ],
                            synonyms: ['examine', 'study', 'investigate', 'review'],
                            relatedWords: {
                                noun: 'analysis',
                                adjective: 'analytical',
                                adverb: 'analytically'
                            },
                            usage: 'formal, academic',
                            frequency: 'common'
                        },
                        'climate': {
                            word: 'climate',
                            phonetic: '/ˈklaɪ.mət/',
                            partOfSpeech: 'noun',
                            definition: 'the general weather conditions usually found in a particular place',
                            level: 'B1',
                            examples: [
                                'The climate in this region is very dry.',
                                'Climate change is a global issue.',
                                'Plants adapt to their local climate.'
                            ],
                            collocations: [
                                'tropical climate', 'temperate climate', 'climate change',
                                'harsh climate', 'mild climate', 'climate conditions'
                            ],
                            synonyms: ['weather', 'atmospheric conditions'],
                            relatedWords: {
                                adjective: 'climatic',
                                noun: 'climatology'
                            },
                            usage: 'general, scientific',
                            frequency: 'very common'
                        }
                    };

                    await new Promise(resolve => setTimeout(resolve, 100));

                    return mockCambridgeResponse[word] || {
                        word: word,
                        phonetic: '/wɜːrd/',
                        partOfSpeech: 'noun',
                        definition: 'a single distinct meaningful element of speech or writing',
                        level: 'A1',
                        examples: [`This is an example sentence with the word "${word}".`],
                        collocations: [`${word} usage`, `common ${word}`],
                        synonyms: ['term', 'expression'],
                        relatedWords: {},
                        usage: 'general',
                        frequency: 'common'
                    };
                } catch (error) {
                    console.error('Dictionary lookup error:', error);
                    return null;
                }
            };

            const getDictionaryData = async (word) => {
                const data = await fetchCambridgeDictionaryData(word);
                if (!data) return null;
                
                return {
                    type: `(${data.partOfSpeech.substring(0, 1)})`,
                    ipa: data.phonetic,
                    meaning: data.definition,
                    level: data.level,
                    examples: data.examples,
                    collocations: data.collocations.join(', '),
                    synonyms: data.synonyms,
                    antonyms: [],
                    relatedWords: data.relatedWords,
                    usage: data.usage,
                    frequency: data.frequency
                };
            };

            // Anki algorithm
            const getNextReviewTime = (difficulty) => {
                const intervals = {
                    'again': 1,
                    'hard': 4,
                    'good': 10,
                    'easy': 25
                };
                return intervals[difficulty] || 1;
            };

            const updateCardDifficulty = (cardId, difficulty) => {
                const nextReview = Date.now() + (getNextReviewTime(difficulty) * 24 * 60 * 60 * 1000);
                setCardDifficulty(prev => ({
                    ...prev,
                    [cardId]: {
                        difficulty,
                        nextReview,
                        reviews: (prev[cardId]?.reviews || 0) + 1
                    }
                }));
            };

            // Exam functions
            const startExam = () => {
                setExamMode(true);
                setCurrentExamQuestion(0);
                setExamAnswers({});
                setExamTime(selectedExam?.timeLimit ? selectedExam.timeLimit * 60 : 3600);
                setTimerRunning(true);
                setShowResults(false);
            };

            const finishExam = () => {
                setTimerRunning(false);
                analyzeExamResults();
                setShowResults(true);
            };

            const analyzeExamResults = () => {
                const results = [];
                const knowledgeGroups = {};
                const questionsToAnalyze = selectedExam?.questions || sampleExamData.questions;

                questionsToAnalyze.forEach(q => {
                    if (q.type === 'single') {
                        const isCorrect = examAnswers[q.id] === q.correct;
                        const knowledge = q.knowledge;
                        
                        if (!knowledgeGroups[knowledge]) {
                            knowledgeGroups[knowledge] = {
                                questions: [],
                                correct: 0,
                                total: 0
                            };
                        }
                        
                        knowledgeGroups[knowledge].questions.push(q.id);
                        knowledgeGroups[knowledge].total++;
                        if (isCorrect) knowledgeGroups[knowledge].correct++;
                        
                    } else if (q.type === 'reading_cluster') {
                        q.questions.forEach(subQ => {
                            const isCorrect = examAnswers[subQ.id] === subQ.correct;
                            const knowledge = subQ.knowledge;
                            
                            if (!knowledgeGroups[knowledge]) {
                                knowledgeGroups[knowledge] = {
                                    questions: [],
                                    correct: 0,
                                    total: 0
                                };
                            }
                            
                            knowledgeGroups[knowledge].questions.push(subQ.id);
                            knowledgeGroups[knowledge].total++;
                            if (isCorrect) knowledgeGroups[knowledge].correct++;
                        });
                    }
                });

                Object.entries(knowledgeGroups).forEach(([knowledge, data], index) => {
                    results.push({
                        stt: index + 1,
                        knowledge,
                        questions: data.questions.join(', '),
                        correct: data.correct,
                        total: data.total,
                        percentage: Math.round((data.correct / data.total) * 100)
                    });
                });

                setExamResults(results);
            };

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            // News Translation with AI
            const translateNewsWithAI = async (vietnameseText) => {
                try {
                    const response = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 2000,
                            messages: [
                                {
                                    role: "user",
                                    content: `Là một chuyên gia biên phiên dịch rất giỏi, hãy chuyển đổi tin tức tiếng Việt sau thành bản tin Tiếng Anh chuyên nghiệp cho học sinh THPT chuẩn bị thi (mức B2-C1). 

Yêu cầu:
1. Tạo 2 cột: Cột 1 bản tiếng Anh, Cột 2 bản dịch tiếng Việt
2. In đậm những từ/cụm từ quan trọng ở mức B1-B2+ 
3. Rút gọn về khoảng 500 từ nếu quá dài
4. Tạo 5 câu hỏi trắc nghiệm A,B,C,D khó và gây nhiễu
5. Bảng từ vựng: Từ vựng | Phiên âm | Nghĩa | Synonyms
6. Đáp án và giải thích chi tiết

Tin tức tiếng Việt:
${vietnameseText}

Trả về định dạng JSON:
{
  "englishVersion": "...",
  "vietnameseVersion": "...", 
  "questions": [{"question": "...", "options": ["A", "B", "C", "D"], "correct": 0}],
  "vocabulary": [{"word": "...", "ipa": "...", "meaning": "...", "synonyms": "..."}],
  "answers": [{"question": 1, "answer": "A", "explanation": "..."}]
}`
                                }
                            ]
                        })
                    });
                    
                    const data = await response.json();
                    let responseText = data.content[0].text;
                    responseText = responseText.replace(/```json\n?/g, "").replace(/```\n?/g, "").trim();
                    
                    return JSON.parse(responseText);
                } catch (error) {
                    console.error("Translation error:", error);
                    return null;
                }
            };

            const handleTranslateNews = async () => {
                if (vietnameseNews.trim()) {
                    const result = await translateNewsWithAI(vietnameseNews);
                    if (result) {
                        setTranslatedNews(result);
                    }
                }
            };

            // Enhanced PDF Processing with Storage
            const processPDFWithAI = async (file) => {
                try {
                    const base64Data = await new Promise((resolve, reject) => {
                        const reader = new FileReader();
                        reader.onload = () => {
                            const base64 = reader.result.split(",")[1];
                            resolve(base64);
                        };
                        reader.onerror = () => reject(new Error("Failed to read file"));
                        reader.readAsDataURL(file);
                    });

                    const response = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 3000,
                            messages: [
                                {
                                    role: "user",
                                    content: [
                                        {
                                            type: "document",
                                            source: {
                                                type: "base64",
                                                media_type: "application/pdf",
                                                data: base64Data,
                                            },
                                        },
                                        {
                                            type: "text",
                                            text: `Hãy phân tích đề thi PDF này và trích xuất tất cả câu hỏi, đáp án và giải thích. 

Trả về định dạng JSON:
{
  "examTitle": "Tên đề thi",
  "examType": "THPT/Grammar/Reading/Mixed",
  "timeLimit": 60,
  "questions": [
    {
      "id": 1,
      "type": "single" | "reading_cluster",
      "question": "...",
      "options": ["A. ...", "B. ...", "C. ...", "D. ..."],
      "correct": 0,
      "explanation": "...",
      "topic": "Grammar/Reading/Vocabulary",
      "difficulty": "Nhận biết/Thông hiểu/Vận dụng/Vận dụng cao",
      "passage": "..." // Only for reading_cluster
    }
  ],
  "totalQuestions": 50
}

Chỉ trả về JSON, không thêm gì khác.`
                                        },
                                    ],
                                },
                            ]
                        })
                    });

                    const data = await response.json();
                    let responseText = data.content[0].text;
                    responseText = responseText.replace(/```json\n?/g, "").replace(/```\n?/g, "").trim();
                    
                    const examData = JSON.parse(responseText);
                    
                    const storedExam = {
                        id: Date.now(),
                        fileName: file.name,
                        uploadDate: new Date().toISOString(),
                        ...examData
                    };
                    
                    setUploadedExams(prev => [...prev, storedExam]);
                    setSelectedExam(storedExam);
                    
                    return examData;
                } catch (error) {
                    console.error("PDF processing error:", error);
                    return null;
                }
            };

            const handlePDFUpload = async (event) => {
                const file = event.target.files[0];
                if (file && file.type === 'application/pdf') {
                    await processPDFWithAI(file);
                }
            };

            // CSV functions
            const exportToCSV = () => {
                const headers = ['Word', 'Type', 'IPA', 'Meaning', 'Example', 'Collocations', 'Synonyms', 'Level'];
                const csvContent = [
                    headers.join(','),
                    ...savedWords.map(word => [
                        word.word,
                        word.type || '',
                        word.ipa || '',
                        `"${word.meaning || ''}"`,
                        `"${(word.examples && word.examples[0]) || ''}"`,
                        `"${word.collocations || ''}"`,
                        `"${(word.synonyms || []).join('; ')}"`,
                        word.level || ''
                    ].join(','))
                ].join('\n');

                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'vocabulary.csv';
                a.click();
                window.URL.revokeObjectURL(url);
            };

            const handleCSVUpload = async (event) => {
                const file = event.target.files[0];
                if (file && file.type === 'text/csv') {
                    const text = await file.text();
                    const lines = text.split('\n').filter(line => line.trim());
                    const vocab = lines.slice(1).map((line, index) => {
                        const values = line.split(',');
                        return {
                            id: Date.now() + index,
                            word: values[0] || '',
                            type: values[1] || '',
                            ipa: values[2] || '',
                            meaning: values[3]?.replace(/"/g, '') || '',
                            examples: [values[4]?.replace(/"/g, '') || ''],
                            collocations: values[5]?.replace(/"/g, '') || '',
                            synonyms: values[6]?.replace(/"/g, '').split(';').map(s => s.trim()) || [],
                            level: values[7] || '',
                            collectionId: 4
                        };
                    });
                    
                    setUploadedVocab(vocab);
                }
            };

            const saveWordToCollection = (wordData, collectionId) => {
                const newWord = {
                    id: Date.now(),
                    word: wordData.word,
                    collectionId: collectionId,
                    type: wordData.type,
                    ipa: wordData.ipa,
                    meaning: wordData.meaning,
                    examples: wordData.examples,
                    collocations: wordData.collocations,
                    synonyms: wordData.synonyms,
                    relatedWords: wordData.relatedWords,
                    usage: wordData.usage,
                    level: wordData.level,
                    dateAdded: new Date().toISOString()
                };
                
                setSavedWords(prev => [...prev, newWord]);
                setShowDictionary(false);
            };

            // Enhanced Dictionary Popup Component with Cambridge-style data
            const DictionaryPopup = ({ word, position, onClose, onSave }) => {
                const [dictData, setDictData] = useState(null);
                const [loading, setLoading] = useState(true);

                useEffect(() => {
                    const fetchDictionaryData = async () => {
                        setLoading(true);
                        const data = await getDictionaryData(word);
                        setDictData(data);
                        setLoading(false);
                    };
                    
                    fetchDictionaryData();
                }, [word]);

                if (loading) {
                    return React.createElement('div', {
                        className: "fixed z-50 bg-white border-2 border-blue-300 rounded-lg shadow-2xl w-96 h-32",
                        style: { 
                            left: Math.min(position.x, window.innerWidth - 384), 
                            top: position.y + 10 
                        }
                    }, 
                        React.createElement('div', { className: "flex items-center justify-center h-full" },
                            React.createElement('div', { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500" }),
                            React.createElement('span', { className: "ml-2 text-gray-600" }, "Loading Cambridge Dictionary...")
                        )
                    );
                }

                if (!dictData) {
                    return React.createElement('div', {
                        className: "fixed z-50 bg-white border-2 border-red-300 rounded-lg shadow-2xl w-96 p-4",
                        style: { 
                            left: Math.min(position.x, window.innerWidth - 384), 
                            top: position.y + 10 
                        }
                    },
                        React.createElement('div', { className: "flex justify-between items-center mb-2" },
                            React.createElement('span', { className: "text-red-600 font-semibold" }, "Word not found"),
                            React.createElement('button', { onClick: onClose, className: "text-gray-500 hover:text-gray-700" },
                                React.createElement(X, { className: "w-4 h-4" })
                            )
                        ),
                        React.createElement('p', { className: "text-sm text-gray-600" }, `Sorry, "${word}" was not found in Cambridge Dictionary.`)
                    );
                }
                
                return React.createElement('div', {
                    className: "fixed z-50 bg-white border-2 border-blue-300 rounded-lg shadow-2xl w-96 max-h-96 overflow-hidden",
                    style: { 
                        left: Math.min(position.x, window.innerWidth - 420), 
                        top: position.y + 10 
                    }
                },
                    // Header
                    React.createElement('div', { className: "flex justify-between items-center p-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white" },
                        React.createElement('div', { className: "flex items-center space-x-3" },
                            React.createElement('div', null,
                                React.createElement('div', { className: "flex items-center space-x-2" },
                                    React.createElement('span', { className: "font-bold text-xl" }, word),
                                    React.createElement('span', { className: "bg-white text-blue-600 px-2 py-1 rounded text-xs font-semibold" }, dictData.level)
                                ),
                                React.createElement('div', { className: "flex items-center space-x-2 mt-1" },
                                    React.createElement('span', { className: "text-blue-100 text-sm" }, dictData.type),
                                    React.createElement('span', { className: "text-blue-100 text-sm font-mono" }, dictData.ipa)
                                )
                            )
                        ),
                        React.createElement('button', { onClick: onClose, className: "text-blue-200 hover:text-white p-1" },
                            React.createElement(X, { className: "w-5 h-5" })
                        )
                    ),
                    
                    // Scrollable Content
                    React.createElement('div', { className: "p-4 max-h-80 overflow-y-auto" },
                        // Definition
                        React.createElement('div', { className: "mb-4" },
                            React.createElement('div', { className: "text-lg text-gray-800 leading-relaxed font-medium" }, dictData.meaning),
                            dictData.frequency && React.createElement('div', { className: "flex items-center mt-2 space-x-2" },
                                React.createElement('span', { className: "text-xs text-gray-500" }, "Frequency:"),
                                React.createElement('span', { className: "text-xs bg-green-100 text-green-700 px-2 py-1 rounded" }, dictData.frequency)
                            )
                        ),
                        
                        // Examples
                        dictData.examples && dictData.examples.length > 0 && React.createElement('div', { className: "mb-4" },
                            React.createElement('strong', { className: "text-sm font-semibold text-gray-700 block mb-2" }, "Examples:"),
                            React.createElement('div', { className: "space-y-2" },
                                dictData.examples.map((example, index) => 
                                    React.createElement('p', { 
                                        key: index, 
                                        className: "text-sm text-gray-700 italic pl-3 border-l-2 border-blue-200" 
                                    }, example)
                                )
                            )
                        ),
                        
                        // Collocations
                        React.createElement('div', { className: "mb-4" },
                            React.createElement('strong', { className: "text-sm font-semibold text-gray-700 block mb-2" }, "Common collocations:"),
                            React.createElement('p', { className: "text-sm text-gray-700 leading-relaxed" }, dictData.collocations)
                        ),
                        
                        // Synonyms
                        dictData.synonyms && dictData.synonyms.length > 0 && React.createElement('div', { className: "mb-4" },
                            React.createElement('strong', { className: "text-sm font-semibold text-gray-700 block mb-2" }, "Synonyms:"),
                            React.createElement('div', { className: "flex flex-wrap gap-2" },
                                dictData.synonyms.map((syn, index) => 
                                    React.createElement('span', { 
                                        key: index, 
                                        className: "bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium" 
                                    }, syn)
                                )
                            )
                        ),
                        
                        // Usage Context
                        dictData.usage && React.createElement('div', { className: "mb-4" },
                            React.createElement('strong', { className: "text-sm font-semibold text-gray-700 block mb-1" }, "Usage:"),
                            React.createElement('span', { className: "text-sm text-gray-600 italic" }, dictData.usage)
                        )
                    ),
                    
                    // Footer
                    React.createElement('div', { className: "flex items-center space-x-3 p-4 bg-gray-50 border-t" },
                        React.createElement('select', { className: "text-sm border rounded px-3 py-2 flex-1 focus:outline-none focus:ring-2 focus:ring-blue-500" },
                            vocabularyCollections.map(col => 
                                React.createElement('option', { key: col.id, value: col.id }, col.name)
                            )
                        ),
                        React.createElement('button', {
                            onClick: () => {
                                const wordDataToSave = {
                                    word: word,
                                    type: dictData.type,
                                    ipa: dictData.ipa,
                                    meaning: dictData.meaning,
                                    examples: dictData.examples,
                                    collocations: dictData.collocations,
                                    synonyms: dictData.synonyms,
                                    relatedWords: dictData.relatedWords,
                                    usage: dictData.usage,
                                    level: dictData.level
                                };
                                onSave(wordDataToSave, 1);
                            },
                            className: "bg-green-500 text-white px-4 py-2 rounded text-sm hover:bg-green-600 flex items-center transition-colors"
                        },
                            React.createElement(Save, { className: "w-4 h-4 mr-1" }),
                            "Save to Collection"
                        )
                    ),

                    // Cambridge Attribution
                    React.createElement('div', { className: "text-xs text-gray-400 text-center py-2 bg-gray-100" }, 
                        "Dictionary data simulated from Cambridge Dictionary format"
                    )
                );
            };

            return React.createElement('div', { className: "min-h-screen bg-gray-100" },
                // Dictionary Popup
                showDictionary && React.createElement(DictionaryPopup, {
                    word: dictionaryWord,
                    position: dictionaryPosition,
                    onClose: () => setShowDictionary(false),
                    onSave: saveWordToCollection
                }),

                // Header
                React.createElement('div', { className: "bg-white shadow-sm" },
                    React.createElement('div', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" },
                        React.createElement('div', { className: "flex justify-between items-center py-4" },
                            React.createElement('div', { className: "flex items-center" },
                                React.createElement(Brain, { className: "w-8 h-8 text-blue-600 mr-3" }),
                                React.createElement('h1', { className: "text-2xl font-bold text-gray-900" }, "Smart English THPT")
                            ),
                            React.createElement('div', { className: "flex items-center space-x-4" },
                                React.createElement('div', { className: "flex items-center text-sm text-gray-600" },
                                    React.createElement(Clock, { className: "w-4 h-4 mr-1" }),
                                    React.createElement('span', null, "Học hôm nay: 45 phút")
                                ),
                                React.createElement('div', { className: "w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold" }, "A")
                            )
                        )
                    )
                ),

                // Navigation
                React.createElement('div', { className: "bg-white border-b" },
                    React.createElement('div', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" },
                        React.createElement('nav', { className: "flex space-x-4 overflow-x-auto" },
                            tabs.map((tab) => {
                                const Icon = tab.icon;
                                return React.createElement('button', {
                                    key: tab.id,
                                    onClick: () => setActiveTab(tab.id),
                                    className: `flex items-center px-3 py-4 text-sm font-medium border-b-2 whitespace-nowrap ${
                                        activeTab === tab.id
                                            ? 'border-blue-500 text-blue-600'
                                            : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                                    }`
                                },
                                    React.createElement(Icon, { className: "w-4 h-4 mr-2" }),
                                    tab.label
                                );
                            })
                        )
                    )
                ),

                // Content
                React.createElement('div', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8" },
                    // Dashboard content will be rendered here
                    React.createElement('div', { className: "text-center text-gray-500" }, 
                        "🚀 Smart English Learning Platform is ready! ",
                        React.createElement('br'),
                        "Double-click any English word to see Cambridge Dictionary popup!"
                    )
                )
            );
        };

        // Render the app
        ReactDOM.render(React.createElement(SmartEnglishLearning), document.getElementById('root'));
    </script>
</body>
</html>